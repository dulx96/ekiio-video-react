(function(e,a){'object'==typeof exports&&'undefined'!=typeof module?a(exports,require('react'),require('react-dom')):'function'==typeof define&&define.amd?define(['exports','react','react-dom'],a):a(e['video-react']={},e.React,e.ReactDOM)})(this,function(e,a,t){'use strict';function o(e,a){return a={exports:{}},e(a,a.exports),a.exports}function n(e){if(null===e||e===void 0)throw new TypeError('Object.assign cannot be called with null or undefined');return Object(e)}function r(){}function l(e){var a,t=e.Symbol;return'function'==typeof t?t.observable?a=t.observable:(a=t('observable'),t.observable=a):a='@@observable',a}function d(e){if('object'!==('undefined'==typeof e?'undefined':K(e))||null===e)return!1;for(var a=e;null!==Object.getPrototypeOf(a);)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(e)===a}function i(e,a,t){function o(){h===u&&(h=u.slice())}function n(){if(y)throw new Error('You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.');return p}function r(e){if('function'!=typeof e)throw new Error('Expected the listener to be a function.');if(y)throw new Error('You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');var a=!0;return o(),h.push(e),function(){if(a){if(y)throw new Error('You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');a=!1,o();var t=h.indexOf(e);h.splice(t,1)}}}function l(e){if(!d(e))throw new Error('Actions must be plain objects. Use custom middleware for async actions.');if('undefined'==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(y)throw new Error('Reducers may not dispatch actions.');try{y=!0,p=c(p,e)}finally{y=!1}for(var a,t=u=h,o=0;o<t.length;o++)a=t[o],a();return e}var s;if('function'==typeof a&&'undefined'==typeof t&&(t=a,a=void 0),'undefined'!=typeof t){if('function'!=typeof t)throw new Error('Expected the enhancer to be a function.');return t(i)(e,a)}if('function'!=typeof e)throw new Error('Expected the reducer to be a function.');var c=e,p=a,u=[],h=u,y=!1;return l({type:j.INIT}),s={dispatch:l,subscribe:r,getState:n,replaceReducer:function(e){if('function'!=typeof e)throw new Error('Expected the nextReducer to be a function.');c=e,l({type:j.REPLACE})}},s[G]=function(){var e,a=r;return e={subscribe:function(e){function t(){e.next&&e.next(n())}if('object'!==('undefined'==typeof e?'undefined':K(e))||null===e)throw new TypeError('Expected the observer to be an object.');t();var o=a(t);return{unsubscribe:o}}},e[G]=function(){return this},e},s}function s(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:W,a=arguments[1];switch(a.type){case'video-react/USER_ACTIVATE':return F({},e,{userActivity:a.activity});case'video-react/PLAYER_ACTIVATE':return F({},e,{isActive:a.activity});case'video-react/FULLSCREEN_CHANGE':return F({},e,{isFullscreen:!!a.isFullscreen});case'video-react/SEEKING_TIME':return F({},e,{seekingTime:a.time});case'video-react/END_SEEKING':return F({},e,{seekingTime:0});case'video-react/LOAD_START':return F({},e,a.videoProps,{hasStarted:!1,ended:!1});case'video-react/CAN_PLAY':return F({},e,a.videoProps,{waiting:!1});case'video-react/WAITING':return F({},e,a.videoProps,{waiting:!0});case'video-react/CAN_PLAY_THROUGH':case'video-react/PLAYING':return F({},e,a.videoProps,{waiting:!1});case'video-react/PLAY':return F({},e,a.videoProps,{ended:!1,paused:!1,autoPaused:!1,waiting:!1,hasStarted:!0});case'video-react/PAUSE':return F({},e,a.videoProps,{paused:!0});case'video-react/END':return F({},e,a.videoProps,{ended:!0});case'video-react/SEEKING':return F({},e,a.videoProps,{seeking:!0});case'video-react/SEEKED':return F({},e,a.videoProps,{seeking:!1});case'video-react/ERROR':return F({},e,a.videoProps,{error:'UNKNOWN ERROR',ended:!0});case'video-react/DURATION_CHANGE':case'video-react/TIME_UPDATE':case'video-react/VOLUME_CHANGE':case'video-react/PROGRESS_CHANGE':case'video-react/RATE_CHANGE':case'video-react/SUSPEND':case'video-react/ABORT':case'video-react/EMPTIED':case'video-react/STALLED':case'video-react/LOADED_META_DATA':case'video-react/LOADED_DATA':case'video-react/RESIZE':var t=F({},e,a.videoProps);return!1===a.videoProps.paused&&(t.hasStarted=!0,t.waiting=!1),t;default:return e;}}function c(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:q,a=arguments[1];switch(a.type){case'video-react/OPERATE':return F({},e,{count:e.count+1,operation:F({},e.operation,a.operation)});default:return e;}}function p(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},a=arguments[1];return{player:s(e.player,a),operation:c(e.operation,a)}}function u(){var e=Math.floor,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a,o=e(a%60),n=e(a/60%60),r=e(a/3600),l=e(t/60%60),d=e(t/3600);return(isNaN(a)||a===1/0)&&(r=n=o='-'),r=0<r||0<d?r+':':'',n=((r||10<=l)&&10>n?'0'+n:n)+':',o=10>o?'0'+o:o,r+n+o}function h(e){return!!(e.props&&e.props.isVideoChild)||'source'===e.type||'track'===e.type}function y(e,a){var t=arguments,o=!1;return function(){o||(e.apply(null,t),o=!0,setTimeout(function(){o=!1},a))}}function v(e){var a=Math.round,t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var o=document.documentElement,n=document.body,r=o.clientLeft||n.clientLeft||0,l=window.pageXOffset||n.scrollLeft,d=t.left+l-r,i=o.clientTop||n.clientTop||0,s=window.pageYOffset||n.scrollTop,c=t.top+s-i;return{left:a(d),top:a(c)}}function g(e,a){var t=Math.max,o=Math.min,n={},r=v(e),l=e.offsetWidth,d=e.offsetHeight,i=r.top,s=r.left,c=a.pageY,p=a.pageX;return a.changedTouches&&(p=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY),n.y=t(0,o(1,(i-c+d)/d)),n.x=t(0,o(1,(p-s)/l)),n}function m(e,a){for(var t=e.className.split(' '),o=0;o<t.length;o++)if(t[o].toLowerCase()===a.toLowerCase())return!0;return!1}function k(e){var a=e.percentage;return S.createElement('div',{className:'video-volume-level',style:{width:''+a}})}function E(e){var a=e.currentTime,t=e.duration,o=e.percentage;return S.createElement('div',{"data-current-time":u(a,t),className:'video-play-progress video-slider-bar',style:{width:o}})}function b(e){function a(e,a){var t=e/a||0;return 100*(1<=t?1:t)+'%'}var t=e.buffered,o=e.duration;if(!t||!t.length)return null;var n=t.end(t.length-1),r={};n>o&&(n=o),r.width=a(n,o);for(var l=[],d=0;d<t.length;d++){var s=t.start(d),c=t.end(d),p=S.createElement('div',{style:{left:a(s,n),width:a(c-s,n)},key:'part-'+d});l.push(p)}return 0===l.length&&(l=null),S.createElement('div',{style:r,className:'video-load-progress'},l)}function f(e){var a=e.duration,t=e.mouseTime,o=e.text;if(!t.time)return null;var n=o||u(t.time,a);return S.createElement('span',{className:'video-mouse-time-display',style:{left:t.position+'px'}},n)}function P(e){var a=e.player,t=a.currentTime,o=a.duration,n=u(t,o);return S.createElement('span',{className:'video-current-time'},n)}function C(e){var a=e.player.duration,t=u(a);return S.createElement('span',{className:'video-duration-display'},t)}var T,S='default'in a?a['default']:a,A=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,D=function(){try{if(!Object.assign)return!1;var e=new String('abc');if(e[5]='de','5'===Object.getOwnPropertyNames(e)[0])return!1;for(var a={},t=0;10>t;t++)a['_'+String.fromCharCode(t)]=t;var o=Object.getOwnPropertyNames(a).map(function(e){return a[e]});if('0123456789'!==o.join(''))return!1;var n={};return['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t'].forEach(function(e){n[e]=e}),'abcdefghijklmnopqrst'===Object.keys(Object.assign({},n)).join('')}catch(e){return!1}}()?Object.assign:function(e){for(var a,t,o=n(e),r=1;r<arguments.length;r++){for(var l in a=Object(arguments[r]),a)_.call(a,l)&&(o[l]=a[l]);if(A){t=A(a);for(var d=0;d<t.length;d++)N.call(a,t[d])&&(o[t[d]]=a[t[d]])}}return o},M='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},R=function(e,a){if(!(e instanceof a))throw new TypeError('Cannot call a class as a function')},L=function(){function e(e,a){for(var t,o=0;o<a.length;o++)t=a[o],t.enumerable=t.enumerable||!1,t.configurable=!0,'value'in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}return function(a,t,o){return t&&e(a.prototype,t),o&&e(a,o),a}}(),F=Object.assign||function(e){for(var a,t=1;t<arguments.length;t++)for(var o in a=arguments[t],a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);return e},w=function(e,a){if('function'!=typeof a&&null!==a)throw new TypeError('Super expression must either be null or a function, not '+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)},O=function(e,a){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return a&&('object'==typeof a||'function'==typeof a)?a:e},I=function(e){if(Array.isArray(e)){for(var a=0,t=Array(e.length);a<e.length;a++)t[a]=e[a];return t}return Array.from(e)},U=function(){function e(e,a,t,o,n,r){if('SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED'!==r){var l=new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types');throw l.name='Invariant Violation',l}}function a(){return e}e.isRequired=e;var t={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:a,element:e,instanceOf:a,node:e,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a};return t.checkPropTypes=r,t.PropTypes=t,t},B=o(function(e){e.exports=U()}),x=o(function(e){(function(){function a(){for(var e,o=[],n=0;n<arguments.length;n++)if(e=arguments[n],e){var r='undefined'==typeof e?'undefined':M(e);if('string'===r||'number'===r)o.push(e);else if(Array.isArray(e)&&e.length){var l=a.apply(null,e);l&&o.push(l)}else if('object'===r)for(var d in e)t.call(e,d)&&e[d]&&o.push(d)}return o.join(' ')}var t={}.hasOwnProperty;e.exports?(a.default=a,e.exports=a):window.classNames=a})()});T='undefined'==typeof self?'undefined'==typeof window?'undefined'==typeof global?'undefined'==typeof module?Function('return this')():module:global:window:self;var G=l(T),j={INIT:'@@redux/INIT'+Math.random().toString(36).substring(7).split('').join('.'),REPLACE:'@@redux/REPLACE'+Math.random().toString(36).substring(7).split('').join('.')},K='function'==typeof Symbol&&'symbol'===M(Symbol.iterator)?function(e){return'undefined'==typeof e?'undefined':M(e)}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':'undefined'==typeof e?'undefined':M(e)},H=Object.freeze({LOAD_START:'video-react/LOAD_START',CAN_PLAY:'video-react/CAN_PLAY',WAITING:'video-react/WAITING',CAN_PLAY_THROUGH:'video-react/CAN_PLAY_THROUGH',PLAYING:'video-react/PLAYING',PLAY:'video-react/PLAY',PAUSE:'video-react/PAUSE',END:'video-react/END',SEEKING:'video-react/SEEKING',SEEKED:'video-react/SEEKED',SEEKING_TIME:'video-react/SEEKING_TIME',END_SEEKING:'video-react/END_SEEKING',DURATION_CHANGE:'video-react/DURATION_CHANGE',TIME_UPDATE:'video-react/TIME_UPDATE',VOLUME_CHANGE:'video-react/VOLUME_CHANGE',PROGRESS_CHANGE:'video-react/PROGRESS_CHANGE',RATE_CHANGE:'video-react/RATE_CHANGE',SUSPEND:'video-react/SUSPEND',ABORT:'video-react/ABORT',EMPTIED:'video-react/EMPTIED',STALLED:'video-react/STALLED',LOADED_META_DATA:'video-react/LOADED_META_DATA',LOADED_DATA:'video-react/LOADED_DATA',RESIZE:'video-react/RESIZE',ERROR:'video-react/ERROR',handleLoadStart:function(e){return{type:'video-react/LOAD_START',videoProps:e}},handleCanPlay:function(e){return{type:'video-react/CAN_PLAY',videoProps:e}},handleWaiting:function(e){return{type:'video-react/WAITING',videoProps:e}},handleCanPlayThrough:function(e){return{type:'video-react/CAN_PLAY_THROUGH',videoProps:e}},handlePlaying:function(e){return{type:'video-react/PLAYING',videoProps:e}},handlePlay:function(e){return{type:'video-react/PLAY',videoProps:e}},handlePause:function(e){return{type:'video-react/PAUSE',videoProps:e}},handleEnd:function(e){return{type:'video-react/END',videoProps:e}},handleSeeking:function(e){return{type:'video-react/SEEKING',videoProps:e}},handleSeeked:function(e){return{type:'video-react/SEEKED',videoProps:e}},handleDurationChange:function(e){return{type:'video-react/DURATION_CHANGE',videoProps:e}},handleTimeUpdate:function(e){return{type:'video-react/TIME_UPDATE',videoProps:e}},handleVolumeChange:function(e){return{type:'video-react/VOLUME_CHANGE',videoProps:e}},handleProgressChange:function(e){return{type:'video-react/PROGRESS_CHANGE',videoProps:e}},handleRateChange:function(e){return{type:'video-react/RATE_CHANGE',videoProps:e}},handleSuspend:function(e){return{type:'video-react/SUSPEND',videoProps:e}},handleAbort:function(e){return{type:'video-react/ABORT',videoProps:e}},handleEmptied:function(e){return{type:'video-react/EMPTIED',videoProps:e}},handleStalled:function(e){return{type:'video-react/STALLED',videoProps:e}},handleLoadedMetaData:function(e){return{type:'video-react/LOADED_META_DATA',videoProps:e}},handleLoadedData:function(e){return{type:'video-react/LOADED_DATA',videoProps:e}},handleResize:function(e){return{type:'video-react/RESIZE',videoProps:e}},handleError:function(e){return{type:'video-react/ERROR',videoProps:e}},handleSeekingTime:function(e){return{type:'video-react/SEEKING_TIME',time:e}},handleEndSeeking:function(e){return{type:'video-react/END_SEEKING',time:e}}}),V=function(){function e(){R(this,e)}return L(e,[{key:'request',value:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:'exit',value:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},{key:'addEventListener',value:function(e){document.addEventListener('fullscreenchange',e),document.addEventListener('webkitfullscreenchange',e),document.addEventListener('mozfullscreenchange',e),document.addEventListener('MSFullscreenChange',e)}},{key:'removeEventListener',value:function(e){document.removeEventListener('fullscreenchange',e),document.removeEventListener('webkitfullscreenchange',e),document.removeEventListener('mozfullscreenchange',e),document.removeEventListener('MSFullscreenChange',e)}},{key:'isFullscreen',get:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}},{key:'enabled',get:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}}]),e}(),z=new V,Y=Object.freeze({OPERATE:'video-react/OPERATE',FULLSCREEN_CHANGE:'video-react/FULLSCREEN_CHANGE',PLAYER_ACTIVATE:'video-react/PLAYER_ACTIVATE',USER_ACTIVATE:'video-react/USER_ACTIVATE',handleFullscreenChange:function(e){return{type:'video-react/FULLSCREEN_CHANGE',isFullscreen:e}},activate:function(e){return{type:'video-react/PLAYER_ACTIVATE',activity:e}},userActivate:function(e){return{type:'video-react/USER_ACTIVATE',activity:e}},play:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{action:'play',source:''};return this.video.play(),{type:'video-react/OPERATE',operation:e}},pause:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{action:'pause',source:''};return this.video.pause(),{type:'video-react/OPERATE',operation:e}},togglePlay:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{action:'toggle-play',source:''};return this.video.togglePlay(),{type:'video-react/OPERATE',operation:e}},seek:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{action:'seek',source:''};return this.video.seek(e),{type:'video-react/OPERATE',operation:a}},forward:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{action:'forward-'+e,source:''};return this.video.forward(e),{type:'video-react/OPERATE',operation:a}},replay:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{action:'replay-'+e,source:''};return this.video.replay(e),{type:'video-react/OPERATE',operation:a}},changeRate:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{action:'change-rate',source:''};return this.video.playbackRate=e,{type:'video-react/OPERATE',operation:a}},changeVolume:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{action:'change-volume',source:''},t=e;return 0>e&&(t=0),1<e&&(t=1),this.video.volume=t,{type:'video-react/OPERATE',operation:a}},mute:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{action:e?'muted':'unmuted',source:''};return this.video.muted=e,{type:'video-react/OPERATE',operation:a}},toggleFullscreen:function(e){return z.enabled?(z.isFullscreen?z.exit():z.request(this.rootElement),{type:'video-react/OPERATE',operation:{action:'toggle-fullscreen',source:''}}):{type:'video-react/FULLSCREEN_CHANGE',isFullscreen:!e.isFullscreen}}}),W={currentSrc:null,duration:0,currentTime:0,seekingTime:0,buffered:null,waiting:!1,seeking:!1,paused:!0,autoPaused:!1,ended:!1,playbackRate:1,muted:!1,volume:1,readyState:0,networkState:0,videoWidth:0,videoHeight:0,hasStarted:!1,userActivity:!1,isActive:!1,isFullscreen:!1},q={count:0,operation:{action:'',source:''}},X=function(){function e(a){R(this,e),this.store=a||i(p,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),this.video=null,this.rootElement=null}return L(e,[{key:'getActions',value:function(){function e(e){return function(){var o=e.apply(a,arguments);'undefined'!=typeof o&&t(o)}}var a=this,t=this.store.dispatch,o=F({},Y,H);return Object.keys(o).filter(function(e){return'function'==typeof o[e]}).reduce(function(a,t){return a[t]=e(o[t]),a},{})}},{key:'getState',value:function(){return this.store.getState()}},{key:'subscribeToStateChange',value:function(e,a){a||(a=this.getState.bind(this));var t=a(),o=function(){var o=a();if(o!==t){var n=t;t=o,e(o,n)}};return this.store.subscribe(o)}},{key:'subscribeToOperationStateChange',value:function(e){var a=this;return this.subscribeToStateChange(e,function(){return a.getState().operation})}},{key:'subscribeToPlayerStateChange',value:function(e){var a=this;return this.subscribeToStateChange(e,function(){return a.getState().player})}}]),e}(),Z=['error','src','srcObject','currentSrc','crossOrigin','networkState','preload','buffered','readyState','seeking','currentTime','duration','paused','defaultPlaybackRate','playbackRate','played','seekable','ended','autoplay','loop','mediaGroup','controller','controls','volume','muted','defaultMuted','audioTracks','videoTracks','textTracks','width','height','videoWidth','videoHeight','poster'],J={actions:B.object,player:B.object,children:B.any,startTime:B.number,loop:B.bool,muted:B.bool,autoPlay:B.bool,playsInline:B.bool,src:B.string,poster:B.string,className:B.string,preload:B.oneOf(['auto','metadata','none']),crossOrigin:B.string,onLoadStart:B.func,onWaiting:B.func,onCanPlay:B.func,onCanPlayThrough:B.func,onPlaying:B.func,onEnded:B.func,onSeeking:B.func,onSeeked:B.func,onPlay:B.func,onPause:B.func,onProgress:B.func,onDurationChange:B.func,onError:B.func,onSuspend:B.func,onAbort:B.func,onEmptied:B.func,onStalled:B.func,onLoadedMetadata:B.func,onLoadedData:B.func,onTimeUpdate:B.func,onRateChange:B.func,onVolumeChange:B.func,onResize:B.func},$=function(e){function a(e){R(this,a);var t=O(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.video=null,t.play=t.play.bind(t),t.pause=t.pause.bind(t),t.seek=t.seek.bind(t),t.forward=t.forward.bind(t),t.replay=t.replay.bind(t),t.toggleFullscreen=t.toggleFullscreen.bind(t),t.getProperties=t.getProperties.bind(t),t.renderChildren=t.renderChildren.bind(t),t.handleLoadStart=t.handleLoadStart.bind(t),t.handleCanPlay=t.handleCanPlay.bind(t),t.handleCanPlayThrough=t.handleCanPlayThrough.bind(t),t.handlePlay=t.handlePlay.bind(t),t.handlePlaying=t.handlePlaying.bind(t),t.handlePause=t.handlePause.bind(t),t.handleEnded=t.handleEnded.bind(t),t.handleWaiting=t.handleWaiting.bind(t),t.handleSeeking=t.handleSeeking.bind(t),t.handleSeeked=t.handleSeeked.bind(t),t.handleFullscreenChange=t.handleFullscreenChange.bind(t),t.handleError=t.handleError.bind(t),t.handleSuspend=t.handleSuspend.bind(t),t.handleAbort=t.handleAbort.bind(t),t.handleEmptied=t.handleEmptied.bind(t),t.handleStalled=t.handleStalled.bind(t),t.handleLoadedMetaData=t.handleLoadedMetaData.bind(t),t.handleLoadedData=t.handleLoadedData.bind(t),t.handleTimeUpdate=t.handleTimeUpdate.bind(t),t.handleRateChange=t.handleRateChange.bind(t),t.handleVolumeChange=t.handleVolumeChange.bind(t),t.handleDurationChange=t.handleDurationChange.bind(t),t.handleProgress=y(t.handleProgress.bind(t),250),t.handleKeypress=t.handleKeypress.bind(t),t}return w(a,e),L(a,[{key:'componentDidMount',value:function(){this.forceUpdate()}},{key:'getProperties',value:function(){var e=this;return this.video?Z.reduce(function(a,t){return a[t]=e.video[t],a},{}):null}},{key:'play',value:function(){var e=this.video.play();void 0!==e&&e.catch(function(){}).then(function(){})}},{key:'pause',value:function(){var e=this.video.pause();void 0!==e&&e.catch(function(){}).then(function(){})}},{key:'load',value:function(){this.video.load()}},{key:'addTextTrack',value:function(){var e;(e=this.video).addTextTrack.apply(e,arguments)}},{key:'canPlayType',value:function(){var e;(e=this.video).canPlayType.apply(e,arguments)}},{key:'togglePlay',value:function(){this.video.paused?this.play():this.pause()}},{key:'seek',value:function(e){try{this.video.currentTime=e}catch(a){}}},{key:'forward',value:function(e){this.seek(this.video.currentTime+e)}},{key:'replay',value:function(e){this.forward(-e)}},{key:'toggleFullscreen',value:function(){var e=this.props,a=e.player,t=e.actions;t.toggleFullscreen(a)}},{key:'handleLoadStart',value:function(){var e=this.props,a=e.actions,t=e.onLoadStart;a.handleLoadStart(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleCanPlay',value:function(){var e=this.props,a=e.actions,t=e.onCanPlay;a.handleCanPlay(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleCanPlayThrough',value:function(){var e=this.props,a=e.actions,t=e.onCanPlayThrough;a.handleCanPlayThrough(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handlePlaying',value:function(){var e=this.props,a=e.actions,t=e.onPlaying;a.handlePlaying(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handlePlay',value:function(){var e=this.props,a=e.actions,t=e.onPlay;a.handlePlay(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handlePause',value:function(){var e=this.props,a=e.actions,t=e.onPause;a.handlePause(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleDurationChange',value:function(){var e=this.props,a=e.actions,t=e.onDurationChange;a.handleDurationChange(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleProgress',value:function(){var e=this.props,a=e.actions,t=e.onProgress;this.video&&a.handleProgressChange(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleEnded',value:function(){var e=this.props,a=e.loop,t=e.player,o=e.actions,n=e.onEnded;a?(this.seek(0),this.play()):!t.paused&&this.pause(),o.handleEnd(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:'handleWaiting',value:function(){var e=this.props,a=e.actions,t=e.onWaiting;a.handleWaiting(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleSeeking',value:function(){var e=this.props,a=e.actions,t=e.onSeeking;a.handleSeeking(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleSeeked',value:function(){var e=this.props,a=e.actions,t=e.onSeeked;a.handleSeeked(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleFullscreenChange',value:function(){}},{key:'handleSuspend',value:function(){var e=this.props,a=e.actions,t=e.onSuspend;a.handleSuspend(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleAbort',value:function(){var e=this.props,a=e.actions,t=e.onAbort;a.handleAbort(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleEmptied',value:function(){var e=this.props,a=e.actions,t=e.onEmptied;a.handleEmptied(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleStalled',value:function(){var e=this.props,a=e.actions,t=e.onStalled;a.handleStalled(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleLoadedMetaData',value:function(){var e=this.props,a=e.actions,t=e.onLoadedMetadata,o=e.startTime;o&&0<o&&(this.video.currentTime=o),a.handleLoadedMetaData(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleLoadedData',value:function(){var e=this.props,a=e.actions,t=e.onLoadedData;a.handleLoadedData(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleTimeUpdate',value:function(){var e=this.props,a=e.actions,t=e.onTimeUpdate;a.handleTimeUpdate(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleRateChange',value:function(){var e=this.props,a=e.actions,t=e.onRateChange;a.handleRateChange(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleVolumeChange',value:function(){var e=this.props,a=e.actions,t=e.onVolumeChange;a.handleVolumeChange(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleError',value:function(){var e=this.props,a=e.actions,t=e.onError;a.handleError(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleResize',value:function(){var e=this.props,a=e.actions,t=e.onResize;a.handleResize(this.getProperties()),t&&t.apply(void 0,arguments)}},{key:'handleKeypress',value:function(){}},{key:'renderChildren',value:function(){var e=this,a=F({},this.props,{video:this.video});return this.video?S.Children.toArray(this.props.children).filter(h).map(function(t){var o;if('string'!=typeof t.type)o=a;else if('source'===t.type){o=F({},t.props);var n=o.onError;o.onError=function(){n&&n.apply(void 0,arguments),e.handleError.apply(e,arguments)}}return S.cloneElement(t,o)}):null}},{key:'render',value:function(){var e=this,a=this.props,t=a.loop,o=a.poster,n=a.preload,r=a.src,l=a.autoPlay,d=a.playsInline,i=a.muted,s=a.crossOrigin,c=a.videoId;return S.createElement('video',{className:'video',id:c,crossOrigin:s,ref:function(a){e.video=a},muted:i,preload:n,loop:t,playsInline:d,autoPlay:l,poster:o,src:r,onLoadStart:this.handleLoadStart,onWaiting:this.handleWaiting,onCanPlay:this.handleCanPlay,onCanPlayThrough:this.handleCanPlayThrough,onPlaying:this.handlePlaying,onEnded:this.handleEnded,onSeeking:this.handleSeeking,onSeeked:this.handleSeeked,onPlay:this.handlePlay,onPause:this.handlePause,onProgress:this.handleProgress,onDurationChange:this.handleDurationChange,onError:this.handleError,onSuspend:this.handleSuspend,onAbort:this.handleAbort,onEmptied:this.handleEmptied,onStalled:this.handleStalled,onLoadedMetadata:this.handleLoadedMetaData,onLoadedData:this.handleLoadedData,onTimeUpdate:this.handleTimeUpdate,onRateChange:this.handleRateChange,onVolumeChange:this.handleVolumeChange},this.renderChildren())}},{key:'playbackRate',get:function(){return this.video.playbackRate},set:function(e){this.video.playbackRate=e}},{key:'muted',get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:'volume',get:function(){return this.video.volume},set:function(e){1<e&&(e=1),0>e&&(e=0),this.video.volume=e}},{key:'videoWidth',get:function(){return this.video.videoWidth}},{key:'videoHeight',get:function(){return this.video.videoHeight}}]),a}(a.Component);$.propTypes=J,$.defaultProps={preload:'auto'},$.displayName='Video';var Q={actions:B.object,player:B.object},ee=function(e){function a(e){return R(this,a),O(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e))}return w(a,e),L(a,[{key:'shouldComponentUpdate',value:function(e){return e.player.paused!==this.props.player.paused}},{key:'handleClick',value:function(){var e=this.props,a=e.actions,t=e.player;t.paused?a.play():a.pause()}},{key:'render',value:function(){var e=this;return S.createElement('button',{className:x({"video-play-toggle-button":!0,"video-paused":this.props.player.paused},'video-control'),onClick:function(){return e.handleClick()}})}}]),a}(S.Component),ae={tagName:B.func.isRequired,onClick:B.func.isRequired,onFocus:B.func,onBlur:B.func,className:B.string},te=function(e){function a(e,t){R(this,a);var o=O(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));return o.handleClick=o.handleClick.bind(o),o.handleFocus=o.handleFocus.bind(o),o.handleBlur=o.handleBlur.bind(o),o.handleKeypress=o.handleKeypress.bind(o),o}return w(a,e),L(a,[{key:'handleKeypress',value:function(e){(32===e.which||13===e.which)&&(e.preventDefault(),this.handleClick(e))}},{key:'handleClick',value:function(e){var a=this.props.onClick;a(e)}},{key:'handleFocus',value:function(a){document.addEventListener('keydown',this.handleKeypress),this.props.onFocus&&this.props.onFocus(a)}},{key:'handleBlur',value:function(a){document.removeEventListener('keydown',this.handleKeypress),this.props.onBlur&&this.props.onBlur(a)}},{key:'render',value:function(){var e=F({},this.props);return S.createElement(e.tagName,{className:x(this.props.className),onClick:this.props.onClick})}}]),a}(a.Component);te.defaultProps={tagName:'div'},te.propTypes=ae,te.displayName='ClickableComponent';var oe={className:B.string,onMouseDown:B.func,onMouseMove:B.func,stepForward:B.func,stepBack:B.func,sliderActive:B.func,sliderInactive:B.func,onMouseUp:B.func,onFocus:B.func,onBlur:B.func,onClick:B.func,getPercent:B.func,vertical:B.bool,children:B.node,label:B.string,valuenow:B.string,valuetext:B.string},ne=function(e){function a(e,t){R(this,a);var o=O(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));return o.handleMouseDown=o.handleMouseDown.bind(o),o.handleMouseMove=o.handleMouseMove.bind(o),o.handleMouseUp=o.handleMouseUp.bind(o),o.handleFocus=o.handleFocus.bind(o),o.handleBlur=o.handleBlur.bind(o),o.handleClick=o.handleClick.bind(o),o.handleKeyPress=o.handleKeyPress.bind(o),o.stepForward=o.stepForward.bind(o),o.stepBack=o.stepBack.bind(o),o.calculateDistance=o.calculateDistance.bind(o),o.getProgress=o.getProgress.bind(o),o.renderChildren=o.renderChildren.bind(o),o.state={active:!1},o}return w(a,e),L(a,[{key:'getProgress',value:function(){var e=this.props.getPercent;if(!e)return 0;var a=e();return('number'!=typeof a||0>a||a===1/0)&&(a=0),a}},{key:'handleMouseDown',value:function(e){var a=this.props.onMouseDown;document.addEventListener('mousemove',this.handleMouseMove,!0),document.addEventListener('mouseup',this.handleMouseUp,!0),document.addEventListener('touchmove',this.handleMouseMove,!0),document.addEventListener('touchend',this.handleMouseUp,!0),this.setState({active:!0,distance:0}),this.props.sliderActive&&this.props.sliderActive(e),this.handleMouseMove(e),a&&a(e)}},{key:'handleMouseMove',value:function(e){var a=this.props.onMouseMove;a&&a(e)}},{key:'handleMouseUp',value:function(e){var a=this.props.onMouseUp;document.removeEventListener('mousemove',this.handleMouseMove,!0),document.removeEventListener('mouseup',this.handleMouseUp,!0),document.removeEventListener('touchmove',this.handleMouseMove,!0),document.removeEventListener('touchend',this.handleMouseUp,!0),this.setState({active:!1}),this.props.sliderInactive&&this.props.sliderInactive(e),a&&a(e)}},{key:'handleFocus',value:function(a){document.addEventListener('keydown',this.handleKeyPress,!0),this.props.onFocus&&this.props.onFocus(a)}},{key:'handleBlur',value:function(a){document.removeEventListener('keydown',this.handleKeyPress,!0),this.props.onBlur&&this.props.onBlur(a)}},{key:'handleClick',value:function(e){e.preventDefault(),this.props.onClick&&this.props.onClick(e)}},{key:'handleKeyPress',value:function(e){37===e.which||40===e.which?(e.preventDefault(),e.stopPropagation(),this.stepBack()):(38===e.which||39===e.which)&&(e.preventDefault(),e.stopPropagation(),this.stepForward())}},{key:'stepForward',value:function(){this.props.stepForward&&this.props.stepForward()}},{key:'stepBack',value:function(){this.props.stepBack&&this.props.stepBack()}},{key:'calculateDistance',value:function(e){var a=t.findDOMNode(this),o=g(a,e);return this.props.vertical?o.y:o.x}},{key:'renderChildren',value:function(){var e=this.getProgress(),a=(100*e).toFixed(2)+'%';return S.Children.map(this.props.children,function(t){return S.cloneElement(t,{progress:e,percentage:a})})}},{key:'render',value:function(){var e=this.props,a=e.vertical,t=e.label,o=e.valuenow,n=e.valuetext;return S.createElement('div',{className:x(this.props.className,{"video-react-slider-vertical":a,"video-react-slider-horizontal":!a,"video-react-sliding":this.state.active},'video-react-slider'),tabIndex:'0',onMouseDown:this.handleMouseDown,onTouchStart:this.handleMouseDown,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick,"aria-label":t||'',"aria-valuenow":o||'',"aria-valuetext":n||'',"aria-valuemin":0,"aria-valuemax":100},this.renderChildren())}}]),a}(a.Component);ne.propTypes=oe,ne.displayName='Slider';var re={percentage:B.string,vertical:B.bool,className:B.string};k.defaultProps={percentage:'100%',vertical:!1},k.propTypes=re,k.displayName='VolumeLevel';var le={actions:B.object,player:B.object,className:B.string,onFocus:B.func,onBlur:B.func},de=function(e){function a(e,t){R(this,a);var o=O(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));return o.state={percentage:'0%'},o.handleMouseMove=o.handleMouseMove.bind(o),o.handlePercentageChange=o.handlePercentageChange.bind(o),o.checkMuted=o.checkMuted.bind(o),o.getPercent=o.getPercent.bind(o),o.stepForward=o.stepForward.bind(o),o.stepBack=o.stepBack.bind(o),o.handleFocus=o.handleFocus.bind(o),o.handleBlur=o.handleBlur.bind(o),o.handleClick=o.handleClick.bind(o),o}return w(a,e),L(a,[{key:'componentDidMount',value:function(){}},{key:'getPercent',value:function(){var e=this.props.player;return e.muted?0:e.volume}},{key:'checkMuted',value:function(){var e=this.props,a=e.player,t=e.actions;a.muted&&t.mute(!1)}},{key:'handleMouseMove',value:function(e){var a=this.props.actions;this.checkMuted();var t=this.slider.calculateDistance(e);a.changeVolume(t)}},{key:'stepForward',value:function(){var e=this.props,a=e.player,t=e.actions;this.checkMuted(),t.changeVolume(a.volume+.1)}},{key:'stepBack',value:function(){var e=this.props,a=e.player,t=e.actions;this.checkMuted(),t.changeVolume(a.volume-.1)}},{key:'handleFocus',value:function(a){this.props.onFocus&&this.props.onFocus(a)}},{key:'handleBlur',value:function(a){this.props.onBlur&&this.props.onBlur(a)}},{key:'handlePercentageChange',value:function(e){e!==this.state.percentage&&this.setState({percentage:e})}},{key:'handleClick',value:function(e){e.stopPropagation()}},{key:'render',value:function(){var e=this,a=this.props.player,t=(100*a.volume).toFixed(2);return S.createElement(ne,F({ref:function(a){e.slider=a},label:'volume level',valuenow:t,valuetext:t+'%',onMouseMove:this.handleMouseMove,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick,sliderActive:this.handleFocus,sliderInactive:this.handleBlur,getPercent:this.getPercent,onPercentageChange:this.handlePercentageChange,stepForward:this.stepForward,stepBack:this.stepBack},this.props,{className:'video-volume-bar video-control'}),S.createElement(k,this.props))}}]),a}(a.Component);de.propTypes=le,de.displayName='VolumeBar';var ie={player:B.object,actions:B.object,className:B.string},se=function(e){function a(e,t){R(this,a);var o=O(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));return o.state={active:!1},o.handleClick=o.handleClick.bind(o),o.handleFocus=o.handleFocus.bind(o),o.handleBlur=o.handleBlur.bind(o),o}return w(a,e),L(a,[{key:'handleClick',value:function(){var e=this.props,a=e.player,t=e.actions;t.mute(!a.muted)}},{key:'handleFocus',value:function(){this.setState({active:!0})}},{key:'handleBlur',value:function(){this.setState({active:!1})}},{key:'render',value:function(){var e=this.props.player,a=this.volumeLevel;return S.createElement('div',{className:x({"video-vol-slider-active":this.state.active},'video-volume-menu')},S.createElement('button',{className:x({"video-vol-muted":e.muted,"video-vol-0":0===a&&!e.muted,"video-vol-1":1===a,"video-vol-2":2===a,"video-vol-3":3===a},'video-volume-button video-control'),onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur}),S.createElement(de,F({onFocus:this.handleFocus,onBlur:this.handleBlur},this.props)))}},{key:'volumeLevel',get:function(){var e=this.props.player,a=e.volume,t=e.muted,o=3;return 0===a||t?o=0:.33>a?o=1:.67>a&&(o=2),o}}]),a}(a.Component);se.propTypes=ie,se.displayName='VolumeMenuButton';var ce={currentTime:B.number,duration:B.number,percentage:B.string,className:B.string};E.propTypes=ce,E.displayName='PlayProgressBar';var pe={duration:B.number,buffered:B.object};b.propTypes=pe,b.displayName='LoadProgressBar',f.propTypes={duration:B.number,mouseTime:B.object},f.displayName='MouseTimeDisplay';var ue={player:B.object,mouseTime:B.object,actions:B.object,className:B.string},he=function(e){function a(e,t){R(this,a);var o=O(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));return o.getPercent=o.getPercent.bind(o),o.getNewTime=o.getNewTime.bind(o),o.stepForward=o.stepForward.bind(o),o.stepBack=o.stepBack.bind(o),o.handleMouseDown=o.handleMouseDown.bind(o),o.handleMouseMove=o.handleMouseMove.bind(o),o.handleMouseUp=o.handleMouseUp.bind(o),o}return w(a,e),L(a,[{key:'componentDidMount',value:function(){}},{key:'componentDidUpdate',value:function(){}},{key:'getPercent',value:function(){var e=this.props.player,a=e.currentTime,t=e.seekingTime,o=e.duration,n=(t||a)/o;return 1<=n?1:n}},{key:'getNewTime',value:function(e){var a=this.props.player.duration,t=this.slider.calculateDistance(e),o=t*a;return o===a?o-.1:o}},{key:'handleMouseDown',value:function(){}},{key:'handleMouseUp',value:function(e){var a=this.props.actions,t=this.getNewTime(e);a.seek(t),a.handleEndSeeking(t)}},{key:'handleMouseMove',value:function(e){var a=this.props.actions,t=this.getNewTime(e);a.handleSeekingTime(t)}},{key:'stepForward',value:function(){var e=this.props.actions;e.forward(5)}},{key:'stepBack',value:function(){var e=this.props.actions;e.replay(5)}},{key:'render',value:function(){var e=this,a=this.props,t=a.player,o=t.currentTime,n=t.seekingTime,r=t.duration,l=t.buffered,d=a.mouseTime,i=n||o;return S.createElement(ne,{ref:function(a){e.slider=a},label:'video progress bar',className:'video-progress-control-box',valuenow:(100*this.getPercent()).toFixed(2),valuetext:u(i,r),onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,getPercent:this.getPercent,stepForward:this.stepForward,stepBack:this.stepBack},S.createElement(b,{buffered:l,currentTime:i,duration:r}),S.createElement(f,{duration:r,mouseTime:d}),S.createElement(E,{currentTime:i,duration:r}))}}]),a}(a.Component);he.propTypes=ue,he.displayName='SeekBar';var ye={player:B.object,className:B.string},ve=function(e){function a(e,t){R(this,a);var o=O(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));return o.state={mouseTime:{time:null,position:0}},o.handleMouseMoveThrottle=o.handleMouseMove.bind(o),o}return w(a,e),L(a,[{key:'handleMouseMove',value:function(e){if(e.pageX){var a=this.props.player.duration,o=t.findDOMNode(this.seekBar),n=g(o,e).x*a,r=e.pageX-v(o).left;this.setState({mouseTime:{time:n,position:r}})}}},{key:'render',value:function(){var e=this;return S.createElement('div',{onMouseMove:this.handleMouseMoveThrottle,className:'video-progress-control video-control'},S.createElement(he,F({mouseTime:this.state.mouseTime,ref:function(a){e.seekBar=a}},this.props)))}}]),a}(a.Component);ve.propTypes=ye,ve.displayName='ProgressControl';var ge={actions:B.object,player:B.object},me=function(e){function a(e,t){R(this,a);var o=O(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));return o.handleClick=o.handleClick.bind(o),o}return w(a,e),L(a,[{key:'shouldComponentUpdate',value:function(e){return e.player.isFullscreen!==this.props.player.isFullscreen}}]),L(a,[{key:'handleClick',value:function(){var e=this.props,a=e.player,t=e.actions;t.toggleFullscreen(a)}},{key:'render',value:function(){var e=this,a=this.props.player;return S.createElement('button',{className:x({"ekiio-video-icon-fullscreen-exit":a.isFullscreen,"ekiio-video-icon-fullscreen":!a.isFullscreen},'video-fullscreen-control video-control ekiio-video-icon'),ref:function(a){e.button=a},tabIndex:'0',onClick:this.handleClick})}}]),a}(a.Component);me.propTypes=ge,me.displayName='FullscreenToggle';var ke=function(e){function a(){return R(this,a),O(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return w(a,e),L(a,[{key:'render',value:function(){return S.createElement('button',{className:'ekiio-video-icon ekiio-video-icon-setting',onClick:this.props.toggleSetting})}}]),a}(S.PureComponent),Ee={player:B.object};P.propTypes=Ee,P.displayName='CurrentTimeDisplay';var be={player:B.object};C.propTypes=be,C.displayName='DurationDisplay';var fe=function(e){var a=[S.createElement(ee,F({key:'toggle-play'},e)),S.createElement(se,F({key:'volume-menu-button'},e)),S.createElement(P,{key:'current-time-display',player:e.player}),S.createElement(ve,F({key:'progress-control'},e)),S.createElement(C,{key:'duration-display',player:e.player}),S.createElement(ke,F({key:'setting-popup-toggle'},e)),S.createElement(me,F({key:'full-screen-toggle'},e))];return S.createElement('div',{className:x('control-bar','control-bar-auto-hide')},a)},Pe='undefined'!=typeof window&&window.navigator?window.navigator.userAgent:'',Ce=/iPad/i.test(Pe),Te=/iPhone/i.test(Pe)&&!Ce,Se=/iPod/i.test(Pe),Ae={clickable:B.bool,dblclickable:B.bool,manager:B.object,actions:B.object,player:B.object,shortcuts:B.array},_e=function(e){function a(e,t){R(this,a);var o=O(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));return o.defaultShortcuts=[{keyCode:32,handle:o.togglePlay},{keyCode:75,handle:o.togglePlay},{keyCode:70,handle:o.toggleFullscreen},{keyCode:37,handle:function(e,a){e.hasStarted&&a.replay(5,{action:'replay-5',source:'shortcut'})}},{keyCode:74,handle:function(e,a){e.hasStarted&&a.replay(10,{action:'replay-10',source:'shortcut'})}},{keyCode:39,handle:function(e,a){e.hasStarted&&a.forward(5,{action:'forward-5',source:'shortcut'})}},{keyCode:76,handle:function(e,a){e.hasStarted&&a.forward(10,{action:'forward-10',source:'shortcut'})}},{keyCode:36,handle:function(e,a){e.hasStarted&&a.seek(0)}},{keyCode:35,handle:function(e,a){e.hasStarted&&a.seek(e.duration)}},{keyCode:38,handle:function(e,a){var t=e.volume+.05;1<t&&(t=1),a.changeVolume(t,{action:'volume-up',source:'shortcut'})}},{keyCode:40,handle:function(e,a){var t=e.volume-.05;0>t&&(t=0);var o=0<t?'volume-down':'volume-off';a.changeVolume(t,{action:o,source:'shortcut'})}},{keyCode:190,shift:!0,handle:function(e,a){var t=e.playbackRate;1.5<=t?t=2:1.25<=t?t=1.5:1<=t?t=1.25:.5<=t?t=1:.25<=t?t=.5:0<=t&&(t=.25),a.changeRate(t,{action:'fast-forward',source:'shortcut'})}},{keyCode:188,shift:!0,handle:function(e,a){var t=e.playbackRate;.5>=t?t=.25:1>=t?t=.5:1.25>=t?t=1:1.5>=t?t=1.25:2>=t&&(t=1.5),a.changeRate(t,{action:'fast-rewind',source:'shortcut'})}}],o.shortcuts=[].concat(I(o.defaultShortcuts)),o.mergeShortcuts=o.mergeShortcuts.bind(o),o.handleKeyPress=o.handleKeyPress.bind(o),o.handleClick=o.handleClick.bind(o),o.handleDoubleClick=o.handleDoubleClick.bind(o),o}return w(a,e),L(a,[{key:'componentDidMount',value:function(){this.mergeShortcuts(),document.addEventListener('keydown',this.handleKeyPress),document.addEventListener('click',this.handleClick),document.addEventListener('dblclick',this.handleDoubleClick)}},{key:'componentDidUpdate',value:function(e){e.shortcuts!==this.props.shortcuts&&this.mergeShortcuts()}},{key:'componentWillUnmount',value:function(){document.removeEventListener('keydown',this.handleKeyPress),document.removeEventListener('click',this.handleClick),document.removeEventListener('dblclick',this.handleDoubleClick)}},{key:'mergeShortcuts',value:function(){var e=function(e){var a=0;return['ctrl','shift','alt'].forEach(function(t){e[t]&&a++}),a},a=(this.props.shortcuts||[]).filter(function(e){return e.keyCode&&e.handle&&'function'==typeof e.handle});this.shortcuts=[].concat(I(a),I(this.defaultShortcuts)).sort(function(t,a){return e(a)-e(t)})}},{key:'togglePlay',value:function(e,a){e.paused?a.play({action:'play',source:'shortcut'}):a.pause({action:'pause',source:'shortcut'})}},{key:'toggleFullscreen',value:function(e,a){a.toggleFullscreen(e)}},{key:'handleKeyPress',value:function(a){var e=this.props,t=e.player,o=e.actions;if(t.isActive&&!(document.activeElement&&(m(document.activeElement,'video-control')||m(document.activeElement,'video-menu-button-active')||m(document.activeElement,'video-big-play-button')))){var n=a.keyCode||a.which,r=a.ctrlKey||a.metaKey,l=a.shiftKey,d=a.altKey,i=this.shortcuts.filter(function(e){return!!(e.keyCode&&0==e.keyCode-n)&&(void 0===e.ctrl||e.ctrl===r)&&(void 0===e.shift||e.shift===l)&&(void 0===e.alt||e.alt===d)})[0];i&&(i.handle(t,o),a.preventDefault())}}},{key:'canBeClicked',value:function(a,t){return!!(a.isActive&&'VIDEO'===t.target.nodeName&&4===a.readyState)}},{key:'handleClick',value:function(a){var e=this.props,t=e.player,o=e.actions,n=e.clickable;this.canBeClicked(t,a)&&n&&this.togglePlay(t,o)}},{key:'handleDoubleClick',value:function(a){var e=this.props,t=e.player,o=e.actions,n=e.dblclickable;this.canBeClicked(t,a)&&n&&this.toggleFullscreen(t,o)}},{key:'render',value:function(){return null}}]),a}(a.Component);_e.propTypes=Ae,_e.defaultProps={clickable:!0,dblclickable:!0},_e.displayName='Shortcut';var Ne={player:B.object},De=function(e){function a(){return R(this,a),O(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return w(a,e),L(a,[{key:'render',value:function(){var e=this.props.player;return e.error?null:S.createElement('div',{className:'video-loading-spinner'},S.createElement('div',null),S.createElement('div',null))}}]),a}(S.Component);De.propTypes=Ne,De.displayName=' LoadingSpinner';var Me={poster:B.string,player:B.object,actions:B.object},Re=function(e){function a(){return R(this,a),O(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return w(a,e),L(a,[{key:'shouldComponentUpdate',value:function(e){return e.player.hasStarted!==this.props.player.hasStarted}},{key:'render',value:function(){var e=this.props,a=e.player,t=e.actions;return a.hasStarted?null:S.createElement('button',{className:'video-big-play-button',onClick:function(){a.paused&&t.play()}})}}]),a}(S.Component);Re.propTypes=Me,Re.displayName='BigPlayButton';var Le={manager:B.object},Fe=function(e){function a(e,t){R(this,a);var o=O(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));return o.timer=null,e.manager.subscribeToOperationStateChange(o.handleStateChange.bind(o)),o.state={hidden:!0,operation:{}},o}return w(a,e),L(a,[{key:'handleStateChange',value:function(e,a){var t=this;e.count!==a.count&&'shortcut'===e.operation.source&&(this.timer&&(clearTimeout(this.timer),this.timer=null),this.setState({hidden:!1,count:e.count,operation:e.operation}),this.timer=setTimeout(function(){t.setState({hidden:!0}),t.timer=null},500))}},{key:'render',value:function(){if('shortcut'!==this.state.operation.source)return null;var e=this.state.hidden?{display:'block'}:null;return S.createElement('div',{className:x({"video-bezel":!0,"video-bezel-animation":0==this.state.count%2,"video-bezel-animation-alt":1==this.state.count%2}),style:e,role:'status',"aria-label":this.state.operation.action},S.createElement('div',{className:x('ekiio-video-bezel-icon','ekiio-video-bezel-icon-'+this.state.operation.action)}))}}]),a}(a.Component);Fe.propTypes=Le,Fe.displayName='Bezel';var we={children:B.any,muted:B.bool,playsInline:B.bool,aspectRatio:B.string,className:B.string,videoId:B.string,startTime:B.number,loop:B.bool,autoPlay:B.bool,src:B.string,poster:B.string,preload:B.oneOf(['auto','metadata','none']),onLoadStart:B.func,onWaiting:B.func,onCanPlay:B.func,onCanPlayThrough:B.func,onPlaying:B.func,onEnded:B.func,onSeeking:B.func,onSeeked:B.func,onPlay:B.func,onPause:B.func,onProgress:B.func,onDurationChange:B.func,onError:B.func,onSuspend:B.func,onAbort:B.func,onEmptied:B.func,onStalled:B.func,onLoadedMetadata:B.func,onLoadedData:B.func,onTimeUpdate:B.func,onRateChange:B.func,onVolumeChange:B.func,store:B.object},Oe=function(e){function a(e){R(this,a);var t=O(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.controlsHideTimer=null,t.video=null,t.manager=new X(e.store),t.actions=t.manager.getActions(),t.manager.subscribeToPlayerStateChange(t.handleStateChange.bind(t)),t.handleResize=t.handleResize.bind(t),t.getChildren=t.getChildren.bind(t),t.handleMouseMove=y(t.handleMouseMove.bind(t),250),t.handleMouseDown=t.handleMouseDown.bind(t),t.startControlsTimer=t.startControlsTimer.bind(t),t.handleFullScreenChange=t.handleFullScreenChange.bind(t),t.handleKeyDown=t.handleKeyDown.bind(t),t.handleFocus=t.handleFocus.bind(t),t.handleBlur=t.handleBlur.bind(t),t}return w(a,e),L(a,[{key:'componentDidMount',value:function(){this.handleResize(),window.addEventListener('resize',this.handleResize),z.addEventListener(this.handleFullScreenChange)}},{key:'componentWillUnmount',value:function(){window.removeEventListener('resize',this.handleResize),z.removeEventListener(this.handleFullScreenChange),this.controlsHideTimer&&window.clearTimeout(this.controlsHideTimer)}},{key:'getChildren',value:function(e){var a=this,t={actions:e.actions,player:e.player};return[S.createElement($,F({ref:function(e){a.video=e,a.manager.video=a.video},key:'video'},e)),S.createElement(fe,F({key:'control-bar'},t,{toggleSetting:e.toggleSetting})),S.createElement(_e,F({key:'short-cut'},t)),S.createElement(De,{key:'loading-spinner',player:e.player}),S.createElement(Re,F({key:'big-play-button'},t)),S.createElement(Fe,{key:'bezel',manager:e.manager})]}},{key:'getState',value:function(){return this.manager.getState()}},{key:'play',value:function(){this.video.play()}},{key:'pause',value:function(){this.video.pause()}},{key:'load',value:function(){this.video.load()}},{key:'addTextTrack',value:function(){var e;(e=this.video).addTextTrack.apply(e,arguments)}},{key:'canPlayType',value:function(){var e;(e=this.video).canPlayType.apply(e,arguments)}},{key:'seek',value:function(e){this.video.seek(e)}},{key:'forward',value:function(e){this.video.forward(e)}},{key:'replay',value:function(e){this.video.replay(e)}},{key:'toggleFullscreen',value:function(){this.video.toggleFullscreen()}},{key:'subscribeToStateChange',value:function(e){return this.manager.subscribeToPlayerStateChange(e)}},{key:'handleResize',value:function(){}},{key:'handleFullScreenChange',value:function(){this.actions.handleFullscreenChange(z.isFullscreen)}},{key:'handleMouseDown',value:function(){this.startControlsTimer()}},{key:'handleMouseMove',value:function(){this.startControlsTimer()}},{key:'handleKeyDown',value:function(){this.startControlsTimer()}},{key:'startControlsTimer',value:function(){var e=this;this.actions.userActivate(!0),clearTimeout(this.controlsHideTimer),this.controlsHideTimer=setTimeout(function(){e.actions.userActivate(!1)},3e3)}},{key:'handleStateChange',value:function(e,a){e.isFullscreen!==a.isFullscreen&&this.handleResize(),this.forceUpdate()}},{key:'handleFocus',value:function(){this.actions.activate(!0)}},{key:'handleBlur',value:function(){this.actions.activate(!1)}},{key:'render',value:function(){var e=this,a=this.props.fluid,t=this.manager.getState(),o=t.player,n=o.paused,r=o.hasStarted,l=o.waiting,d=o.seeking,i=o.isFullscreen,s=o.userActivity,c=F({},this.props,{player:o,src:this.props.src,actions:this.actions,manager:this.manager,store:this.manager.store,video:this.video?this.video.video:null}),p=this.getChildren(c);return S.createElement('div',{className:x({"video-has-started":r,"video-paused":n,"video-playing":!n,"video-waiting":l,"video-seeking":d,"video-fullscreen":i,"video-user-inactive":!s,"video-user-active":s,"video-workinghover":!(Te||Ce||Se)},'ekiio-video-player',this.props.className),ref:function(a){e.manager.rootElement=a},onTouchStart:this.handleMouseDown,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,tabIndex:'-1'},S.Children.map(this.props.children,function(a){return S.cloneElement(a,{player:o,actions:e.actions})}),p)}},{key:'playbackRate',get:function(){return this.video.playbackRate},set:function(e){this.video.playbackRate=e}},{key:'muted',get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:'volume',get:function(){return this.video.volume},set:function(e){this.video.volume=e}},{key:'videoWidth',get:function(){return this.video.videoWidth}},{key:'videoHeight',get:function(){return this.video.videoHeight}}]),a}(a.Component);Oe.contextTypes={store:B.object},Oe.propTypes=we,Oe.defaultProps={muted:!1,playsInline:!1,aspectRatio:'auto'},Oe.displayName='Player';var Ie={actions:B.object,player:B.object},Ue=function(e){function a(e,t){return R(this,a),O(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t))}return w(a,e),L(a,[{key:'shouldComponentUpdate',value:function(){return!1}},{key:'render',value:function(){return S.createElement('button',{className:'btn-switch-sub',type:'button',onClick:this.props.toggleSubVi},'VI/EN')}}]),a}(S.Component);Ue.propTypes=Ie,e.Player=Oe,e.Video=$,e.TogglePlay=ee,e.CurrentTime=P,e.ChangeSubVi=Ue,Object.defineProperty(e,'__esModule',{value:!0})});
//# sourceMappingURL=ekiio-video-react.full.min.js.map
